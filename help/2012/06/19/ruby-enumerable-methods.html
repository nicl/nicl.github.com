<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<meta name="viewport" content="width=device-width" />
<title>Enumerable methods in Ruby</title>
<link rel="stylesheet" type="text/css" media="screen" href="/css/core.css" />
<link rel="stylesheet" type="text/css" media="screen" href="/css/style.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="/js/switch-theme.js"></script>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
  article, aside, figure, footer, header, hgroup,
  menu, nav, section { display: block; }
</style>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21627283-1']);
  _gaq.push(['_trackPageview']);

  (function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>
<body>

  <header class="clearfix">
    <a id="logo" title="Home" href="http://room271.net">room271</a>
    <ul class="switch-theme">
      <li class="light" data-theme="light"><span>Light</span></li>
      <li class="dark" data-theme="dark"><span>Dark</span></li>
    </ul>
    <nav>
      <ul>
        <li><a href="/">home</a></li>
        <li><a href="/about.html">about</a></li>
      </ul>
    </nav>
  </header>

  <div id="main" class="clearfix">
    <article class="clearfix">
      <h1>Enumerable methods in Ruby</h1>
      <div class="date">19 June 2012</div>
<p>Ruby is a lightweight scripting language and as such it provides a variety of in-built mechanisms for enumerating through collections (arrays and hashes mostly).</p>

<p>These methods can often replace the traditional &#8216;for&#8217; and &#8216;while&#8217; loops, which are error-prone because they require implementing an iterator of some kind.</p>

<p>The methods to know are:</p>

<ul>
<li>#each</li>

<li>#map</li>

<li>#select</li>

<li>#inject</li>

<li>#reject</li>

<li>#detect</li>
</ul>

<p>Some methods do not necessarily require a block (for example, inject).</p>

<p>Most of the methods are callable by different names (this is Ruby after all!).</p>

<p>All methods can be used with either the one-line or do..end forms.</p>

<p>All methods do not operate on the collection directly, but return a new collection. Sometimes, versions which modify are available (usually suffixed with &#8217;!&#8217;).</p>

<h2 id='each'>#each</h2>

<p>Allows iterating through a collection and operating (via a block) on each item:</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>array</span> <span class='o'>=</span> <span class='o'>[</span><span class='mi'>1</span><span class='p'>,</span> <span class='mi'>2</span><span class='p'>,</span> <span class='mi'>3</span><span class='o'>]</span>
<span class='n'>array</span><span class='o'>.</span><span class='n'>each</span><span class='p'>()</span> <span class='k'>do</span> <span class='o'>|</span><span class='n'>value</span><span class='o'>|</span>
  <span class='o'>.</span><span class='n'>.</span><span class='o'>.</span>
<span class='k'>end</span>
</code></pre>
</div>
<h2 id='map'>#map</h2>

<p>Operate on each item using a block and generate an array from the results.</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>array</span> <span class='o'>=</span> <span class='o'>[</span><span class='mi'>1</span><span class='p'>,</span> <span class='mi'>2</span><span class='p'>,</span> <span class='mi'>3</span><span class='o'>]</span>
<span class='kp'>new</span> <span class='o'>=</span> <span class='n'>array</span><span class='o'>.</span><span class='n'>map</span><span class='p'>()</span> <span class='p'>{</span> <span class='o'>|</span><span class='n'>value</span><span class='o'>|</span> <span class='n'>value</span> <span class='o'>+</span> <span class='s1'>&#39;!&#39;</span><span class='p'>}</span>
<span class='c1'># new is [&#39;1!&#39;, &#39;2!&#39;, &#39;3!&#39;]. array is unchanged.</span>
</code></pre>
</div>
<p>The collect() method is equivalent (and is perhaps more obviously named).</p>

<h2 id='select'>#select</h2>

<p>Like map but rather than modifying an array, filters it to return a new array of values for which your expression returns true.</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>array</span> <span class='o'>=</span> <span class='o'>[</span><span class='mi'>1</span><span class='p'>,</span> <span class='mi'>2</span><span class='p'>,</span> <span class='mi'>3</span><span class='o'>]</span>
<span class='kp'>new</span> <span class='o'>=</span> <span class='n'>array</span><span class='o'>.</span><span class='n'>select</span><span class='p'>()</span> <span class='p'>{</span> <span class='o'>|</span><span class='n'>n</span><span class='o'>|</span> <span class='n'>n</span> <span class='o'>&gt;</span> <span class='mi'>1</span><span class='p'>}</span>
<span class='c1'># new is [2, 3]. array is unchanged.</span>
</code></pre>
</div>
<h2 id='inject'>#inject</h2>

<p>Combine all elements using a binary operation.</p>

<p>I.e. you are injecting each value into some calculation. Alternatively put, you are reducing the collection to a single value.</p>
<div class='highlight'><pre><code class='ruby'><span class='n'>array</span> <span class='o'>=</span> <span class='o'>[</span><span class='mi'>1</span><span class='p'>,</span> <span class='mi'>2</span><span class='p'>,</span> <span class='mi'>3</span><span class='o'>]</span>
<span class='n'>reduced</span> <span class='o'>=</span> <span class='n'>array</span><span class='o'>.</span><span class='n'>inject</span><span class='p'>(</span><span class='ss'>:+</span><span class='p'>)</span>
<span class='c1'>#reduced is 6 (the sum of all the values)</span>
</code></pre>
</div>
<p>There are many options/rules for this method (about accumulators, etc.). See the docs <a href='http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject'>here</a>.</p>

<p>Also known accessible as &#8216;reduce&#8217;.</p>

<h2 id='reject'>#reject</h2>

<p>Returns an array of all elements for which the block returns false.</p>

<p>Opposite of map/collect.</p>

<h2 id='detect'>#detect</h2>

<p>Iterates over elements and returns the first for which the block returns true.</p>
<div class='highlight'><pre><code class='ruby'><span class='p'>(</span><span class='mi'>1</span><span class='o'>.</span><span class='n'>.</span><span class='mi'>100</span><span class='p'>)</span><span class='o'>.</span><span class='n'>detect</span> <span class='p'>{</span><span class='o'>|</span><span class='n'>i</span><span class='o'>|</span> <span class='n'>i</span> <span class='o'>%</span> <span class='mi'>5</span> <span class='o'>==</span> <span class='mi'>0</span> <span class='ow'>and</span> <span class='n'>i</span> <span class='o'>%</span> <span class='mi'>7</span> <span class='o'>==</span> <span class='mi'>0</span> <span class='p'>}</span>   <span class='c1'>#=&gt; 35</span>
</code></pre>
</div>


      
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_shortname = 'room271';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      <a href="http://disqus.com" class="dsq-brlink">comments powered
        by <span class="logo-disqus">Disqus</span></a>
      

    </article>
  </div>

  <footer>
    <div class="footer-inner">
      &copy; MMXII nic long
      <div id="contact">
        <a href="https://github.com/nicl">github</a>, nicolaslong@gmail.com
        <a id="feed" title="atom" href="http://room271.net/atom.xml"><img id="atom-image" alt="atom" src="images/feed.png"></a>
      </div>
    </div>
  </footer>

</body>
</html>
